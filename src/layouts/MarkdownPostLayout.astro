---
import BaseLayout from "./BaseLayout.astro";
import Warning from "../components/Warning";
import FormattedDate from "../components/FormattedDate.astro";
import type { CollectionEntry } from "astro:content";

type Props = { frontmatter: CollectionEntry<"blog">["data"] };

const { frontmatter } = Astro.props;
---

<BaseLayout
  pageTitle={frontmatter.title}
  image={frontmatter.image.url}
  pageDescription={frontmatter.description}
>
  <Warning
    message={String.fromCharCode(
      72,
      101,
      121,
      32,
      72,
      117,
      109,
      97,
      110,
      115,
      33,
      32,
      118,
      105,
      115,
      105,
      116,
      32,
      104,
      111,
      109,
      101,
      32,
      102,
      105,
      114,
      115,
      116,
      32,
      98,
      101,
      102,
      111,
      114,
      101,
      32,
      114,
      101,
      97,
      100,
      105,
      110,
      103,
      32,
      98,
      108,
      111,
      103,
    )}
    client:load
  />
  <p>
    <FormattedDate date={frontmatter.pubDate} />
  </p>
  <p><em>{frontmatter.description}</em></p>
  <p>Written by: {frontmatter.author}</p>
  <figure style="text-align: center;width: inherit;margin:0">
    <img class="img" src={frontmatter.image.url} alt={frontmatter.image.alt} />
    {
      frontmatter.image.caption && (
        <figcaption style="font-size: 0.9rem; color: #666 ;">
          {frontmatter.image.caption}
        </figcaption>
      )
    }
  </figure>

  <div class="tags">
    {
      frontmatter.tags.map((tag: string) => (
        <p class="tag">
          <a href={`/tags/${tag}`}>{tag}</a>
        </p>
      ))
    }
  </div>

  <slot />
</BaseLayout>
<style>
  a {
    color: #00539f;
  }
  .img {
    width: inherit;
    aspect-ratio: 2 / 1;
    object-fit: cover;
    border-radius: 0.5em;
  }
  .tags {
    display: flex;
    flex-wrap: wrap;
  }

  .tag {
    margin: 0.25em;
    border: dotted 1px #a1a1a1;
    border-radius: 0.5em;
    padding: 0.5em 1em;
    font-size: 1.15em;
    background-color: #f8fcfd;
  }
</style>
